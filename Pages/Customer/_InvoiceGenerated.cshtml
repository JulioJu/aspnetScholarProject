@using Videotheque.Data
@model Customer

@{
  List<Article> CurrentlyBorrowedList = (List<Article>)
      ViewData["CurrentlyBorrowedList"];
  string[] ShouldBeRemovedArray =
    (string[])ViewData["ShouldBeRemovedArray"];
  double CustomDiscount = (double)((int)ViewData["CustomDiscount"]);
}

<table id="invoice" class="no-style">
  <tbody class="no-style">
    <tr class="no-style">
      <td class="no-style">
<main>
  <h1> Facture </h1>
  <hr />
  <div id="addresses">
    <span id="store-address" >
      NeoVim Videotheque Corporation <br />
      1 place de la République <br />
      75000 Contonso City <br />
      01 23 45 67 89 <br />
      www.neovim.io <br />
      Siret en cours d'attribution <br />
    </span>
    <span id="customer-address" >
      @if (String.IsNullOrWhiteSpace(Model.Lastname))
      {
        @Model.Firstname @Model.Lastname
      }
      @if (String.IsNullOrWhiteSpace(Model.Society))
      {
        @Model.Society <br />
      }
      @Model.AddressStreet <br />
      @Model.AddressCountry <br />
    </span>
  </div>

  <table id="detail-price">
    <thead>
      <tr>
        <th scope="col">
          Film loués
        </th>
        @if (CustomDiscount != 0)
        {
          <th scope="col">
            Remise
          </th>
        }
        <th>
          TVA
        </th>
        <th scope="col">
          Prix hors-taxe
        </th>
        <th scope="col">
          Prix TTC
        </th>
      </tr>
    </thead>
    <tbody>
      @{
        double priceHT = 0;
        double priceTTC = 0;
      }
        @for (int index = 0;
            index < CurrentlyBorrowedList.Count;
            index++)
        {
          if (bool.Parse(ShouldBeRemovedArray[index]))
          {
            @:<tr>
              Article article = CurrentlyBorrowedList[index];
              <td>Code-barre: @article.Id Titre: @article.Film.Title</td>
              @if (CustomDiscount != 0)
              {
                <td>@CustomDiscount %</td>
              }
              <td>2 %</td>
              <td>
                @{
                  double articlePriceHT = (int)article.Film.Price * 1.5 + 2;
                  articlePriceHT -= @CustomDiscount / 100 * articlePriceHT;
                  priceHT += articlePriceHT;
                }
                @System.Math.Round(articlePriceHT, 2)
              </td>
              <td>
                @{
                  double articlePriceTTC = articlePriceHT
                    + (0.02 * articlePriceHT);
                  priceTTC += articlePriceTTC;
                }
                @System.Math.Round(articlePriceTTC, 2)
              </td>
          @:</tr>
          }
        }
    </tbody>
  </table>

  <table id="total-price">
    <colgroup>
      <col span="1" class="thead" />
      <col span="1" />
    </colgroup>
    <tr>
      <th scope="row">Total hors-taxe</th>
      <td>@System.Math.Round(priceHT,2) euros</td>
    </tr>
    <tr>
      <th scope="row">Total TTC en euro</th>
      <td>@System.Math.Round(priceTTC, 2) euros</td>
    </tr>
  </table>

  <p class="clear">
    <em>Lorem Ipsum only to show that when we print, footer are correctly positionned
      at bottom of the page: </em><br />
    Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do
    eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad
    minim veniam, quis nostrud exercitation ullamco laboris nisi ut
    aliquip ex ea commodo consequat.  Duis aute irure dolor in
    reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla
    pariatur. Excepteur sint occaecat cupidatat non proident, sunt in
    culpa qui officia deserunt mollit anim id est laborum.
    Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do
    eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad
    minim veniam, quis nostrud exercitation ullamco laboris nisi ut
    aliquip ex ea commodo consequat.  Duis aute irure dolor in
    reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla
    pariatur. Excepteur sint occaecat cupidatat non proident, sunt in
    culpa qui officia deserunt mollit anim id est laborum.
    Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do
    eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad
    minim veniam, quis nostrud exercitation ullamco laboris nisi ut
    aliquip ex ea commodo consequat.  Duis aute irure dolor in
    reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla
    pariatur. Excepteur sint occaecat cupidatat non proident, sunt in
    culpa qui officia deserunt mollit anim id est laborum.
    Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do
    eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad
    minim veniam, quis nostrud exercitation ullamco laboris nisi ut
    aliquip ex ea commodo consequat.  Duis aute irure dolor in
    reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla
    pariatur. Excepteur sint occaecat cupidatat non proident, sunt in
    culpa qui officia deserunt mollit anim id est laborum.
    Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do
    eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad
    minim veniam, quis nostrud exercitation ullamco laboris nisi ut
    aliquip ex ea commodo consequat.  Duis aute irure dolor in
    reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla
    pariatur. Excepteur sint occaecat cupidatat non proident, sunt in
    culpa qui officia deserunt mollit anim id est laborum.
    Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do
    eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad
    minim veniam, quis nostrud exercitation ullamco laboris nisi ut
    aliquip ex ea commodo consequat.  Duis aute irure dolor in
    reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla
    pariatur. Excepteur sint occaecat cupidatat non proident, sunt in
    culpa qui officia deserunt mollit anim id est laborum.
    Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do
    eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad
    minim veniam, quis nostrud exercitation ullamco laboris nisi ut
    aliquip ex ea commodo consequat.  Duis aute irure dolor in
    reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla
    pariatur. Excepteur sint occaecat cupidatat non proident, sunt in
    culpa qui officia deserunt mollit anim id est laborum.
    Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do
    eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad
    minim veniam, quis nostrud exercitation ullamco laboris nisi ut
    aliquip ex ea commodo consequat.  Duis aute irure dolor in
    reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla
    pariatur. Excepteur sint occaecat cupidatat non proident, sunt in
    culpa qui officia deserunt mollit anim id est laborum.
    Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do
    eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad
    minim veniam, quis nostrud exercitation ullamco laboris nisi ut
    aliquip ex ea commodo consequat.  Duis aute irure dolor in
    reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla
    pariatur. Excepteur sint occaecat cupidatat non proident, sunt in
    culpa qui officia deserunt mollit anim id est laborum.
    Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do
    eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad
    minim veniam, quis nostrud exercitation ullamco laboris nisi ut
    aliquip ex ea commodo consequat.  Duis aute irure dolor in
    reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla
    pariatur. Excepteur sint occaecat cupidatat non proident, sunt in
    culpa qui officia deserunt mollit anim id est laborum.
    Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do
    eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad
    minim veniam, quis nostrud exercitation ullamco laboris nisi ut
    aliquip ex ea commodo consequat.  Duis aute irure dolor in
    reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla
    pariatur. Excepteur sint occaecat cupidatat non proident, sunt in
    culpa qui officia deserunt mollit anim id est laborum.
  </p>

  <p id="payement-condition">
    Conditions de paiment : paiment comptant. <br />

    Aucun escompte consenti pour réglement anticipé. <br />

    Tout incident de paiement est passible d'intérêt de retard. <br />

    Le montant des pénalités résulte de l'application aux sommes reatant dues
    d'un taux d'intérêt légal en vigueur au moment de l'incident. <br />

    Indéminsation forfaitaire pour frais de recouvrement due au créancier
    en cas de retard de paiement: 40 euros
  </p>
</main>
      </td>
    </tr>
  </tbody>
  <tfoot class="no-style">
    <tr class="no-style">
      <td class="tfoot-empty">
        &nbsp;
      </td>
    </tr>
  </tfoot>
</table>

<footer>
  <span>
    Vim Entreprise au capital de 10 000 euros, siret en cours d'immatriculation
  </span>
</footer>

<!-- vim:sw=2:ts=2:et:fileformat=dos
-->
